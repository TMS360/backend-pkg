// pkg/proto/teams/teams.proto
syntax = "proto3";

package teams;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/TMS360/backend-pkg/proto/teams";

service TeamsService {
  // Get DriverCrew details by targetDate
  rpc GetDriverCrew(GetDriverCrewRequest) returns (GetDriverCrewResponse);

  // Returns IDs of vehicles assigned during the requested window
  rpc GetBusyVehicles(GetBusyVehiclesRequest) returns (GetBusyVehiclesResponse);

  // Get current drivers for a list of trucks
  rpc GetCurrentDriversByTruckIds (GetCurrentDriversByTruckIdsRequest) returns (GetCurrentDriversByTruckIdsResponse);
  rpc GetCurrentDriversByTrailerIds (GetCurrentDriversByTrailerIdsRequest) returns (GetCurrentDriversByTrailerIdsResponse);
}

message GetDriverCrewRequest {
  string driver_crew_id = 1;
  string target_date = 2; // Format: YYYY-MM-DD
}

message GetDriverCrewResponse {
  repeated DriverCrewInfo data = 1;
}

message GetBusyVehiclesRequest {
  google.protobuf.Timestamp from = 1;
  google.protobuf.Timestamp to = 2;
}

message GetBusyVehiclesResponse {
  repeated string truck_ids = 1;
  repeated string trailer_ids = 2;
}

message GetCurrentDriversByTruckIdsRequest {
  repeated string truck_ids = 1;
}

message GetCurrentDriversByTruckIdsResponse {
  repeated DriverCrewInfo data = 1;
}

message GetCurrentDriversByTrailerIdsRequest {
  repeated string trailer_ids = 1;
}

message GetCurrentDriversByTrailerIdsResponse {
  repeated DriverCrewInfo data = 1;
}

message DriverCrewInfo {
  string primary_driver_id = 1;
  string secondary_driver_id = 2;
  string truck_id = 3;
  string trailer_id = 4;
  string plan_id = 5;
}

message TrailerInfo {
  string truck_id = 1;
}